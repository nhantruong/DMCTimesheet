@model DMCTimesheet.Models.C01_Projects

@{
    ViewBag.Title = "Cập nhật thông tin dự án";
    //Layout = "~/Views/Shared/_AdminLayout.cshtml";

    List<DMCTimesheet.Models.C13_ProjectType> projectType = ViewBag.ProjectType as List<DMCTimesheet.Models.C13_ProjectType>;
    List<DMCTimesheet.Models.C16_Status> status = ViewBag.Status as List<DMCTimesheet.Models.C16_Status>;
    List<DMCTimesheet.Models.C11_Location> locations = ViewBag.Location as List<DMCTimesheet.Models.C11_Location>;
    List<DMCTimesheet.Models.C10_Owner> owners = ViewBag.Owner as List<DMCTimesheet.Models.C10_Owner>;
    List<DMCTimesheet.Models.C20_Stage> stage = ViewBag.Stage as List<DMCTimesheet.Models.C20_Stage>;
    List<DMCTimesheet.Models.C23_NguonViec> nguonviec = ViewBag.nguonviec as List<DMCTimesheet.Models.C23_NguonViec>;

}


<div class="nav navbar-fixed-top row">
    @Html.ActionLink(" Home", "Index", "Project", null, new { @class = "fa fa-home btn btn-round btn-dark" })
</div>
<div class="clearfix"></div>

<h3>@ViewBag.Title</h3>
<div class="clearfix"></div>


@using (Html.BeginForm("Edit", "Project", FormMethod.Post))
{
    @Html.AntiForgeryToken()
    @*@Html.HiddenFor(Model => Model.ProjectID)*@
<form>
    @* WorkType *@
    <div class="form-group row text-left">
        <lable hidden class="control-label col-md-3 col-sm-3 col-xs-3">Mã dự án</lable>
        <input type="text" class="form-control col-md-7 col-sm-9 col-xs-9" name="ProjectID" placeholder="" hidden readonly value="@Model.ProjectID" />
    </div>
    <div class="form-group row text-left">
        <lable class="control-label col-md-3 col-sm-3 col-xs-3">Mã dự án</lable>
        <input type="text" class="form-control col-md-7 col-sm-9 col-xs-9 text-danger" name="MaDuAn" placeholder="" value="@Model.MaDuAn" />
    </div>

    <div class="form-group row text-left">
        <lable class="control-label col-md-3 col-sm-3 col-xs-3">Năm</lable>
        <input type="number" class="form-control col-md-7 col-sm-9 col-xs-9" name="Year" value="@Model.Year" />
    </div>

    <div class="form-group row text-left">
        <lable class="control-label col-md-3 col-sm-3 col-xs-3">Tên dự án theo Hợp đồng</lable>
        <input type="text" class="form-control col-md-7 col-sm-9 col-xs-9 text-primary" name="ProjectName" placeholder="" value="@Model.ProjectName" />
    </div>

    <div class="form-group row text-left">
        <lable class="control-label col-md-3 col-sm-3 col-xs-3">Tên dự án rút gọn</lable>
        <input type="text" class="form-control col-md-7 col-sm-9 col-xs-9 text-danger" name="ProjectOtherName" placeholder="" required="" value="@Model.ProjectOtherName" />
    </div>

    <div class="form-group row">
        <lable class="control-label col-md-3 col-sm-3 col-xs-3 text-left">Ngày bắt đầu</lable>
        <input type="date" class="form-control col-md-7 col-sm-9 col-xs-9" name="StartDate" placeholder="" required="" value="@DateTime.Parse(Model.StartDate.ToString()).ToString("yyyy-MM-dd")" />
    </div>

    @* ProjectTypeID *@
    <div class="form-group row  text-left">
        <lable class="control-label col-md-3 col-sm-3 col-xs-3">Loại hình dự án</lable>
        <select name="ProjectTypeId" class="form-control col-md-7 col-sm-9 col-xs-9">
            @if (Model.ProjectTypeId != null)
            {
                <option value="@Model.ProjectTypeId">@projectType.FirstOrDefault(s => s.TypeId == Model.ProjectTypeId).TypeName</option>
                <option value="@Model.ProjectTypeId">----------------------</option>
            }            
            @foreach (var item in projectType.OrderBy(s => s.TypeName))
            {
                <option value="@item.TypeId">@item.TypeName</option>
            }
        </select>
    </div>
    @* StateID *@
    <div class="form-group row  text-left">
        <lable class="control-label col-md-3 col-sm-3 col-xs-3">Giai đoạn</lable>
        <select name="ProjectStage" class="form-control col-md-7 col-sm-9 col-xs-9">
            @if (Model.ProjectStage != null)
            {
                <option value="@Model.ProjectStage">@stage.FirstOrDefault(s => s.Id == Model.ProjectStage).StageName</option>
                <option value="@Model.ProjectStage">----------------------</option>
            }
            @foreach (var item in stage)
            {
                <option value="@item.Id">@item.StageName</option>
            }
        </select>
    </div>
    @* LocationID *@
    <div class="form-group row  text-left">
        <lable class="control-label col-md-3 col-sm-3 col-xs-3">Vị trí</lable>
        <select name="LocationId" class="form-control col-md-7 col-sm-9 col-xs-9">
            @if (Model.LocationId != null)
            {
                <option value="@Model.LocationId">@locations.FirstOrDefault(s => s.LocationId == Model.LocationId).LocationName</option>
                <option value="@Model.LocationId">----------------------</option>
            }
            @foreach (var item in locations)
            {
                <option value="@item.LocationId">@item.LocationName</option>
            }
        </select>
    </div>
    @* OwnerID *@
    <div class="form-group row  text-left">
        <lable class="control-label col-md-3 col-sm-3 col-xs-3">Chủ đầu tư</lable>
        <select name="OwnerId" class="form-control col-md-7 col-sm-9 col-xs-9">
            @if (Model.OwnerId != null)
            {
                <option value="@Model.OwnerId">@owners.FirstOrDefault(s => s.OnwerId == Model.OwnerId).ShortName</option>
                <option value="@Model.OwnerId">----------------------</option>
            }
            @foreach (var item in owners)
            {
                <option value="@item.OnwerId">@item.ShortName</option>
            }
        </select>
    </div>

    @* StatusID *@
    <div class="form-group row  text-left">
        <lable class="control-label col-md-3 col-sm-3 col-xs-3">Tình trạng triển khai</lable>
        <select name="ProjectStatusId" class="form-control col-md-7 col-sm-9 col-xs-9">
            @if (Model.ProjectStatusId != null)
            {
                <option value="@Model.ProjectStatusId">@status.FirstOrDefault(s => s.Id == Model.ProjectStatusId).StatusName</option>
                <option value="@Model.ProjectStatusId">----------------------</option>
            }
            @foreach (var item in status)
            {
                <option value="@item.Id">@item.StatusName</option>
            }
        </select>
    </div>
    
    @* Nguồn Việc *@
    <div class="form-group row  text-left">
        <lable class="control-label col-md-3 col-sm-3 col-xs-3">Nguồn việc</lable>
        <select name="NguonViec" class="form-control col-md-7 col-sm-9 col-xs-9">
            @if (Model.NguonViec != null)
            {
                <option value="@Model.NguonViec">@nguonviec.FirstOrDefault(s => s.Id == Model.NguonViec).NguonViec</option>
                <option value="@Model.NguonViec">----------------------</option>
            }
            @foreach (var item in nguonviec)
            {
                <option value="@item.Id">@item.NguonViec</option>
            }
        </select>
    </div>



    @* Ngay ket thuc *@
<div class="form-group row">
    <lable class="control-label col-md-3 col-sm-3 col-xs-3 text-left">Ngày kết thúc</lable>
    @if (Model.NgayKetThuc != null)
    {
        <input type="date" class="form-control col-md-7 col-sm-9 col-xs-9" name="NgayKetThuc" placeholder="" value="@DateTime.Parse(Model.NgayKetThuc.ToString()).ToString("yyyy-MM-dd")" />
    }
    else
    {
        <input type="date" class="form-control col-md-7 col-sm-9 col-xs-9" name="NgayKetThuc" placeholder="" value="" />
    }
<</div>


    <div class="form-group text-left">
        <lable class="control-label col-md-3 col-sm-3 col-xs-3 text-left"></lable>
        <input type="submit" value="Save" class="btn btn-primary col-md-1" />
    </div>
</form>
}


<div class="modal-footer">
    <div>
        <p class="text-danger">@ViewBag.SaveContent</p>
    </div>
    <div class="clearfix"></div>
</div>