@model IEnumerable<DMCTimesheet.Models.C10_Owner>
@{
    ViewBag.Title = "Owner Manage Page";
    //Layout = "~/Views/Shared/_AdminLayout.cshtml";
    string updateInfo = ViewBag.SaveContent;
    List<DMCTimesheet.Models.C11_Location> Locations = ViewBag.Location as List<DMCTimesheet.Models.C11_Location>;
    int stt = 1;
}
<link href="~/Content/cscpda-scrollbar.css" rel="stylesheet" />

<div class="row">
    <div class="col-md-10">
        <h3>
            DANH SÁCH CHỦ ĐẦU TƯ - <b>
                @if (Model == null)
                {
                    <b class="text-primary">0</b>}
                else
                {<b class="text-danger">@Model.Count()</b>}
            </b>
        </h3>
    </div>

    <div class="col-md-2">
        <button type="button" class="btn btn-danger btn-small text-right" data-toggle="modal" data-target="#form">Thêm mới CDT</button>
    </div>
</div>

<h3 class="text-danger">@ViewBag.Error</h3>

@* Form nhập liệu *@
<div id="form" class="modal fade" role="dialog">
    <div class="modal-dialog modal-m">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Thêm Chủ đầu tư</h3>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                @using (Html.BeginForm("CreateNewOwner", "Setting", FormMethod.Post))
                {
                    @Html.AntiForgeryToken()
                    <form>
                        @* WorkType *@
                        <div class="form-group row text-left">
                            <lable class="control-label col-md-3 col-sm-3 col-xs-3">Tên đầy đủ của CDT</lable>
                            <input type="text" class="form-control col-md-7 col-sm-9 col-xs-9" name="OwnerName" placeholder="Tên theo Hợp đồng" required="" value="" />
                        </div>
                        <div class="form-group row text-left">
                            <lable class="control-label col-md-3 col-sm-3 col-xs-3">Tên rút gọn</lable>
                            <input type="text" class="form-control col-md-7 col-sm-9 col-xs-9" name="ShortName" placeholder="Tên rút gọn" value="" />
                        </div>
                        <div class="form-group row text-left">
                            <lable class="control-label col-md-3 col-sm-3 col-xs-3">Người đại diện</lable>
                            <input type="text" class="form-control col-md-7 col-sm-9 col-xs-9" name="KeyPerson" placeholder="Tên người đại diện" value="" />
                        </div>
                        <div class="form-group row text-left">
                            <lable class="control-label col-md-3 col-sm-3 col-xs-3">Email người đại diện</lable>
                            <input type="email" class="form-control col-md-7 col-sm-9 col-xs-9" name="Email" placeholder="" value="" />
                        </div>

                        <div class="form-group row  text-left">
                            <lable class="control-label col-md-3 col-sm-3 col-xs-3">Vị trí</lable>
                            <select name="OnwerLocation" class="form-control col-md-7 col-sm-9 col-xs-9">
                                <option value=""></option>
                                @foreach (var item in Locations)
                                {
                                    <option value=@item.LocationId>@item.LocationName</option>
                                }
                            </select>
                        </div>

                        <div class="form-group row text-left">
                            <lable class="control-label col-md-3 col-sm-3 col-xs-3">Mô tả</lable>
                            <textarea type="text" class="form-control col-md-7 col-sm-9 col-xs-9" name="OnwerDescription" placeholder="Mô tả ngắn gọn" value=""></textarea>
                        </div>
                        <div class="form-group text-left">
                            <lable class="control-label col-md-3 col-sm-3 col-xs-3 text-left"></lable>
                            <input type="submit" value="Save New Owner" class="btn btn-success col-md-7" />
                        </div>
                    </form>
                }
            </div>
            <div class="modal-footer">
                <div>
                    <p class="text-danger">@ViewBag.SaveContent</p>
                </div>
                <div class="clearfix"></div>
            </div>
        </div>
    </div>
</div>
@* End Form nhập liệu *@

@*Table area*@
<div class="table-responsive col-md-12">
    <table class="table table-borderless">
        <tr class="text-white" style="background-color:#000000">
            <td class="col-md-1" style="width:60px">STT</td>
            <td class="col-md-2">Tên đầy đủ theo HĐ</td>
            <td class="col-md-2">Tên rút gọn</td>
            <td class="col-md-1">Người đại diện</td>
            <td class="col-md-2">Email Người đại diện</td>
            <td class="col-md-1">Vị trí</td>
            <td class="col-md-2">Mô tả</td>
            @*<td class="col-md-1">Actived</td>*@
            <td class="col-md-1">#</td>
        </tr>
    </table>
</div>
<div class="table-responsive" style="height:900px">
    <div class="col-md-12">
        <table class="table table-striped table-bordered">
            <tbody class="">
                @if (Model == null || Model.Count() == 0)
                {
                    <tr class="row">
                        <td>Chưa có thông tin của CĐT</td>
                    </tr>
                }
                else
                {
                    foreach (var item in Model.Where(s => s.OnwerId != 1).OrderBy(s => s.ShortName))
                    {
                        <tr class="row">
                            <td style="width:60px">@stt</td>
                            <td class="col-md-2"><b class="text-primary"> @Html.ActionLink(item.OwnerName, "EditOwner", "Setting", new { Id = item.OnwerId }, new { @class = "text-primary" })</b></td>
                            <td class="col-md-2">
                                <b>
                                    @Html.ActionLink(item.ShortName, "EditOwner", "Setting", new { Id = item.OnwerId }, new { @class = "text-danger" })
                                </b>
                            </td>
                            <td class="col-md-1">@item.KeyPerson</td>
                            <td class="col-md-2">@item.Email</td>
                            <td class="col-md-1">
                                @if (item.OnwerLocation == null)
                                {
                                    <a>-</a>
                                }
                                else
                                {
                                    <a>@Locations.FirstOrDefault(s => s.LocationId == item.OnwerLocation).LocationName</a>
                                }
                            </td>
                            <td class="col-md-2">@item.OnwerDescription</td>
                            @*<td class="col-md-1">
                                    <select disabled name="Actived" class="form-control col-md-7 col-sm-9 col-xs-9">
                                        @if (item.Active == true)
                                        {
                                            <option value="1">Đang làm việc</option>
                                        }
                                        else
                                        {
                                            <option value="0">Không còn làm việc </option>
                                        }

                                    </select>
                                </td>*@
                            <td class="col-md-1">
                                @Html.ActionLink(" ", "EditOwner", "Setting", new { Id = item.OnwerId }, new { @class = "fa fa-edit" })
                                @Html.ActionLink(" ", "DeleteOwner", "Setting", new { Id = item.OnwerId }, new { @class = "fa fa-remove btn" })
                            </td>
                        </tr>
                        stt++;
                    }
                }
            </tbody>

        </table>
    </div>
</div>

